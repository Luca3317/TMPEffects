<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Yarn Spinner | TMPEffects documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Yarn Spinner | TMPEffects documentation ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/Luca3317/TMPEffects/blob/docs/Documentation~/manual/yarnspinner.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="yarn-spinner">Yarn Spinner</h1>

<p><a href="https://yarnspinner.dev">YarnSpinner</a> is compatible with TMPEffects animations out of the box -- simply add the TMPAnimator component to the relevant GameObjects as you would normally.</p>
<p>In order to use TMPWriter with YarnSpinner, you will want to disable both the &quot;Typewriter Effect&quot; and &quot;Fade Effect&quot; on your DialogueView component (which, if you use the standard objects imported when you install YarnSpinner, is the LineView component on the Dialogue System prefab).
Then add the TMPWriter component on the GameObject that holds the text, as you did with the TMPAnimator.</p>
<h3 id="variable-storage-as-keywords">Variable storage as keywords</h3>
<p>You can use variables defined in YarnSpinner as keywords for your tag parameters. For example, if in your YarnSpinner script you define a variable like so:</p>
<pre><code class="lang-markdown">&amp;lt;&amp;lt;declare $someValue=12&amp;gt;&amp;gt;
</code></pre>
<p>You can then use that value as tag parameter like so:</p>
<pre><code class="lang-markdown">This is a cool line in my &amp;lt;wave amplitude=$someVal&amp;gt;YarnSpinner&amp;lt;/&amp;gt; script!
</code></pre>
<p>To achieve this, you'll have to:</p>
<ul>
<li>Create a class that derives from <a href="../api/TMPEffects.Databases.TMPSceneKeywordDatabaseBase.html">TMPSceneKeywordDatabaseBase</a></li>
<li>Give that class a reference to the relevant VariableStorage (in the standard Unity YarnSpinner setup this is a component on DialogueSystem)</li>
<li>Implement the methods for the types you want to use (example below shows how to do this for float variables)</li>
<li>Put your database on a GameObject, and assign that GameObject in the TMPAnimator/TMPWriter inspector</li>
</ul>
<pre><code class="lang-csharp">public class MyDB : TMPSceneKeywordDatabaseBase
{
    [SerializeField] private InMemoryVariableStorage storage;

    public override bool TryGetFloat(string str, out float result)
    {
        return storage.TryGetValue(str, out result);
    }

    // We dont want to support AnimationCurve keywords defined in YarnSpinner, so just return false
    public override bool TryGetAnimCurve(string str, out AnimationCurve result)
    {
        result = default;
        return false;
    }

    // ...
}
</code></pre>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/Luca3317/TMPEffects/blob/docs/Documentation~/manual/yarnspinner.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          TMPEffects documentation
        </div>
      </div>
    </footer>
  </body>
</html>
