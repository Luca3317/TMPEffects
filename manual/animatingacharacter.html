<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Animating a character | TMPEffects documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Animating a character | TMPEffects documentation ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/night-owl.min.css">
    <link rel="stylesheet" href="../styles/colors.css">
    <link rel="stylesheet" href="../styles/discord.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>

  <body>
        <div class="top-navbar">

            <a class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="24" height="24" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>

            
            <a class="brand" href="../index.html">
              <img src="../logo.svg" alt="" class="logomark">
              <span class="brand-title"></span>
            </a>
        </div>

        <div class="body-content">

            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">

                <div class="sidebar">
                    
                    
                    <div>
                      <div class="mobile-hide">
                        
                        <a class="brand" href="../index.html">
                          <img src="../logo.svg" alt="" class="logomark">
                          <span class="brand-title"></span>
                        </a>  </div>
                    
                          <div class="sidesearch">
                              <form id="search" role="search" class="search">
                                  <svg width="20" height="20" class="search-icon" viewbox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                                  <input type="text" id="search-query" placeholder="Search" autocomplete="off">
                              </form>
                          </div>
                    
                      <div id="navbar">
                      </div>
                    
                    </div>
                    

                    <div class="sidebar-item-separator"></div>

                        
                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>

                </div>

                <div class="footer">
                  TMPEffects documentation
                  
                </div>
            </nav>

            <main class="main-panel">

                    
                    <div id="search-results" class="main-panel-content" style="display: none;">
                      <h1 class="search-list">Search Results for <span></span></h1>
                      <div class="sr-items">
                        <p><svg class="index-loading" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></p>
                      </div>
                      <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
                    </div>
                <div role="main" class="main-panel-content hide-when-search">

                        
                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                        </div>

                    <article class="content wrap" id="_content" data-uid="">
<h1 id="animating-a-character">Animating a character</h1>

<p>This section guides you through how you animate characters in TMPEffects.</p>
<p>As shown in <a href="tmpanimator_creatinganimations.html">Creating animations</a>, the <mark style="color: lightgray; background-color: #191a18">Animate</mark> method takes two parameters:</p>
<ul>
<li><mark style="color: lightgray; background-color: #191a18"><a href="chardata.html">CharData</a></mark></li>
<li><mark style="color: lightgray; background-color: #191a18"><a href="ianimationcontext.html">IAnimationContext</a></mark></li>
</ul>
<p>For general information about these types, see the respective documentation.</p>
<h2 id="applying-transformations-to-a-character">Applying transformations to a character</h2>
<h4 id="moving-the-character">Moving the character</h4>
<p>To move the character, simply use the <mark style="color: lightgray; background-color: #191a18">SetPosition(Vector3 position)</mark> or  <mark style="color: lightgray; background-color: #191a18">AddPositionDelta(Vector3 delta)</mark>
method on <mark style="color: lightgray; background-color: #191a18">CharData</mark>.<br>Most of the time, you will want to do this using the original position of the character and an offset.</p>
<pre><code class="lang-csharp">public void Animate(CharData cData, IAnimationContext context)
{
    // Move the character up 125 units over time, then down again; indefinitely
    float val = Mathf.PingPong(context.animatorContext.PassedTime * 50, 125);
    cData.SetPosition(cData.InitialPosition + Vector3.up * val);
}
</code></pre><video style="min-width: 300px; max-width: 2000px; width:75%; height:auto;" src="../videos/animatingacharacter/moving.mp4" width="320" height="240" autoplay="" loop="" muted="">
  Your browser does not support the video tag.
</video>

<h4 id="rotating-the-character">Rotating the character</h4>
<p>To rotate the character, use <mark style="color: lightgray; background-color: #191a18">CharData&#39;s</mark> <mark style="color: lightgray; background-color: #191a18">SetRotation(Quaternion rotation)</mark> method.
If you want to rotate around a specific pivot, you may set it using either the <mark style="color: lightgray; background-color: #191a18">SetPivot(Vector3 pivot)</mark> method or the <mark style="color: lightgray; background-color: #191a18">AddPivotDelta(Vector3 delta)</mark> method.<br>If you don&#39;t set a pivot for the rotation, it will rotate around the center of the character.</p>
<pre><code class="lang-csharp">public void Animate(CharData cData, IAnimationContext context)
{
    // Rotate the character indefinitely in the z axis over time
    float angle = context.animatorContext.PassedTime * 50 % 360;
    cData.SetRotation(Quaternion.Euler(0, 0, angle));

    // And by adding this line, it will use the pivot you set;
    // in this case the character will rotate around the point 150 units from its
    // center on the x axis
    cData.AddPivotDelta(Vector3.right * 150);
}
</code></pre><video style="min-width: 300px; max-width: 2000px; width:75%; height:auto;" src="../videos/animatingacharacter/rotating.mp4" width="320" height="240" autoplay="" loop="" muted="">
  Your browser does not support the video tag.
</video>

<h4 id="scaling-the-character">Scaling the character</h4>
<p>To scale the character, use the <mark style="color: lightgray; background-color: #191a18">SetScale(Vector3 scale)</mark> method.</p>
<pre><code class="lang-csharp">public void Animate(CharData cData, IAnimationContext context)
{
    // Ping-pong the scale between (0, 0, 0) and (1, 1, 1) over time
    float val = Mathf.PingPong(context.animatorContext.PassedTime, 1);
    Vector3 scale = Vector3.one * val;
    cData.SetScale(scale);
}
</code></pre><video style="min-width: 300px; max-width: 2000px; width:75%; height:auto;" src="../videos/animatingacharacter/scaling.mp4" width="320" height="240" autoplay="" loop="" muted="">
  Your browser does not support the video tag.
</video>

<h2 id="modifying-a-characters-vertices">Modifying a character&#39;s vertices</h2>
<h4 id="setting-the-vertices-positions">Setting the vertices&#39; positions</h4>
<p>You can set the positions of the character&#39;s vertices using the <mark style="color: lightgray; background-color: #191a18">SetPosition(int i, Vector3 value)</mark> method on the <mark style="color: lightgray; background-color: #191a18">VertexData</mark> type. The integer specifies the vertex to modify (again, see <a href="chardata.html">CharData</a>) while the vector specifies the new position.</p>
<pre><code class="lang-csharp">public void Animate(CharData cData, IAnimationContext context)
{
    // Pingpong the magnitude of the offset between 0 and 125 over time,
    // then add that offset to the two top vertices 
    float val = Mathf.PingPong(context.animatorContext.PassedTime * 50, 125);
    for (int i = 1; i &lt; 3; i++)
    {
        cData.mesh.SetPosition(i, cData.initialMesh.GetPosition(i) + Vector3.up * val);
    }
}
</code></pre><video style="min-width: 300px; max-width: 2000px; width:75%; height:auto;" src="../videos/animatingacharacter/positions.mp4" width="320" height="240" autoplay="" loop="" muted="">
  Your browser does not support the video tag.
</video>

<h4 id="setting-the-vertices-colors">Setting the vertices&#39; colors</h4>
<p>Using the <mark style="color: lightgray; background-color: #191a18">SetColor(int i, Color32 value, bool ignoreAlpha)</mark> method, you can set the color value of each vertex.<br>If you pass <mark style="color: lightgray; background-color: #191a18">true</mark> for <mark style="color: lightgray; background-color: #191a18">ignoreAlpha</mark>, only the RGB color channels are overwritten;
the alpha channel will remain unchanged.<br>If you want to do the opposite of this and only set the alpha channel, then you can use the <mark style="color: lightgray; background-color: #191a18">SetAlpha(int i, float alpha)</mark> method.</p>
<pre><code class="lang-csharp">public void Animate(CharData cData, IAnimationContext context)
{
    // Set each vertex color to red and set the alpha dependent on passed time.
    Color32 color = Color.red;
    float alpha = Mathf.PingPong(context.animatorContext.PassedTime * 125, 255);
    for (int i = 0; i &lt; 4; i++)
    {
        cData.mesh.SetColor(i, color, true);
        cData.mesh.SetAlpha(i, alpha);
    }
}
</code></pre><video style="min-width: 300px; max-width: 2000px; width:75%; height:auto;" src="../videos/animatingacharacter/colors.mp4" width="320" height="240" autoplay="" loop="" muted="">
  Your browser does not support the video tag.
</video>

<h4 id="setting-the-vertices-uvs">Setting the vertices&#39; UVs</h4>
<p>Using the <mark style="color: lightgray; background-color: #191a18">SetUV0(int i, Vector2 uv)</mark> and <mark style="color: lightgray; background-color: #191a18">SetUV2(int i, Vector2 uv)</mark> methods, you can set the <mark style="color: lightgray; background-color: #191a18">UV0</mark> and <mark style="color: lightgray; background-color: #191a18">UV2</mark> values of each vertex respectively.</p>
<p>These properties are more niche compared to the other ones, and you will likely use them much less; <mark style="color: lightgray; background-color: #191a18">char</mark> is the only built-in animation to utilize this property.</p>
<pre><code class="lang-csharp">public void Animate(CharData cData, IAnimationContext context)
{
    // Pan the UV0 of the character over time
    Vector2 delta = Vector2.right * context.animatorContext.PassedTime;
    for (int i = 0; i &amp;lt; 4; i++)
    {
        cData.mesh.SetUV0(i, cData.initialMesh.GetUV0(i) + delta);
    }
}
</code></pre><video style="min-width: 300px; max-width: 2000px; width:75%; height:auto;" src="../videos/animatingacharacter/uvs.mp4" width="320" height="240" autoplay="" loop="" muted="">
  Your browser does not support the video tag.
</video>

<h2 id="making-your-animation-fancier">Making your animation fancier</h2>
<p>The above character transformations and vertex modifiers are all you really need to animate your character!<br>Combined with easing functions (see: <a href="animationcurveutility.html">AnimationCurveUtility</a>, <a href="tmpanimator_animationutility_wave.html">Waves</a>), even these really simple animations above can look quite nice already.</p>
<p>For example, the animation code for the built-in <mark style="color: lightgray; background-color: #191a18"><a href="tmpanimator_builtinbasicanimations.html">jump</a></mark> animation is hardly more complicated than that
for the <a href="animatingacharacter.html#moving-the-character">first animation on this page</a> (at least once you&#39;ve looked at <a href="tmpanimator_animationutility_wave.html">Waves</a> <span class="emoji" shortcode="wink">😉</span>).</p>
<pre><code class="lang-csharp">public override void Animate(CharData cData, IAnimationContext context)
{
    Data data = (Data)context.customData;

    float eval = data.wave.Evaluate(context.animatorContext.PassedTime, GetWaveOffset(cData, context, data.waveOffsetType)).Item1;
    cData.SetPosition(cData.InitialPosition + Vector3.up * eval);
}
</code></pre><video style="min-width: 300px; max-width: 2000px; width:75%; height:auto;" src="../videos/animatingacharacter/jumping.mp4" width="320" height="240" autoplay="" loop="" muted="">
  Your browser does not support the video tag.
</video></article>
              
                </div>
            </main>
        </div>

        
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script type="text/javascript" src="../styles/jquery.twbsPagination.js"></script>
<script type="text/javascript" src="../styles/url.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script type="text/javascript" src="../styles/docfx.js"></script>
<script type="text/javascript" src="../styles/main.js"></script>

    </body>

</html>
